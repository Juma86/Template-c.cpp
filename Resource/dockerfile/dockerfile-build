ARG HOSTARG_BASEIMAGE=alpine:3.22
ARG HOSTARG_INSTALL_PACKAGES_COMMAND=apk add make
ARG HOSTARG_PACKAGES_UPGRADE=apk update && apk upgrade

FROM ${HOSTARG_BASEIMAGE}
WORKDIR /project/

ARG HOSTARG_PACKAGES_UPGRADE
ARG HOSTARG_INSTALL_PACKAGES_COMMAND

ENV HOSTARG_PACKAGES_UPGRADE=${HOSTARG_PACKAGES_UPGRADE}
ENV HOSTARG_INSTALL_PACKAGES_COMMAND=${HOSTARG_INSTALL_PACKAGES_COMMAND}

RUN $HOSTARG_PACKAGES_UPGRADE
RUN $HOSTARG_INSTALL_PACKAGES_COMMAND

CMD make container
